# Simple CRUD
Реализация простого CRUD на примере работы с аккаунтами пользователей
## Стэк
- `Go 1.22`
- `PostgreSQL` - СУБД
- `Postman` - Тестирование API
## Зависимости
- `github.com/gorilla/mux` - Маршрутизатор и диспетчер для создания HTTP-сервисов
- `github.com/joho/godotenv` - Загрузка переменных из файла .env
- `github.com/lib/pq` - Драйвер PostgreSQL для Go
## Запуск программы
1. Клонируйте репозиторий
2. Установите зависимости:
```
go mod tidy
```
3. Создайте базу данных:
Создайте базу данных. Далее, в папке `db` находится файл `schema.sql`, содержащий *sql скрипт* для создания необходимых таблиц. 
4. Настройте .env файл:
Перейдите в папку config и переименуйте `example.env` в `config.env`. После этого отредактируйте переменные в файле, указав ваши параметры Базы Данных.
5. Запустите программу:
Перейдите в папку `cmd\myapp` и запустите программу с помощью команды:
```
go run main.go
```
6. Сервер запущен по адресу `http://localhost:8080` (порт по умолчанию)
## Конечные точки API
Доступны следующие конечные точки:
- `POST /user` : Создает нового пользователя. Принимает `json` содержащий `имя` и `email`.
- `GET /user/{id}` : Извлекает пользователя по ID. Принимает идентификатор `id` из БД.
- `PUT /user/{id}` : Обновляет данные пользователя по ID. Принимает `json` содержащий `имя` и `email`.
- `DELETE /user/{id}` : Удаляет необходимого пользователя. Принимает идентификатор `id` из БД.
## Структура базы данных
Таблица `users` имеет поля:
- `id` - Идентификатор пользователя. Является PRIMARY KEY
- `name` - Имя пользователя. Максимальная длинна - 50
- `email` - Эл.почта пользователя. Максимальная длина - 100
## Структура .env файла
- `PORT` - Порт сервера. По умолчанию установлен `:8080`
- `DB_DRIVER` - Драйвер базы данных. По умолчанию установлен для `PostgreSQL`
- `DB_USER` - Имя пользователя для доступа к БД
- `DB_PASSWORD` - Пароль пользователя для доступа к БД
- `DB_HOST` - Сервер БД. По умолчанию установлен `localhost`
- `DB_NAME` - Название базы данных
- `DB_SSLMODE` - SSL режим. По умолчанию установлен `disable`
## Тело запроса JSON
Пример *json запроса* для создания нового пользователя. Для удобного тестирования можно использовать программу **Postman**.
```json
{
    "name": "Marshall Mathers",
    "email": "marshall.m@gmail.com"
}
```
